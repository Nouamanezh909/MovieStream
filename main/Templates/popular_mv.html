<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  {% include "head.html" %}
  <title> Home </title>
</head>

<body>
  <!-- NAvbar -->

  <!-- carousel dynamique from api / extend trendign template  -->

  <section id="main">
  
    <div id="carousel_dynamique" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        {% for slides in data_slide  %}
        <!-- data slide to needs to be dynamique  -->
          <li data-target="#carousel_dynamique" data-slide-to="{{slides.index}}" class=""></li>
        {% endfor %}
      </ol>
      
      <div class="carousel-inner">
        {% for trends in trend_img.results[0:3] %}]
        <div class="carousel-item active">

          <!-- getting posters imgs -->
            <img src="https://image.tmdb.org/t/p/original{{ trends['backdrop_path'] }}" alt="Trending Movies">
          
          <!-- rating starts  -->

          <div class="carousel-caption">
            <div class="rating">
              <h1> 8.5 </h1>
              <i class="fas fa-star-half-alt"></i>
              <i class="fas fa-star-half-alt"></i>
              <i class="fas fa-star-half-alt"></i>
              <i class="fas fa-star-half-alt"></i>
            </div>
            <h5 class="text-white">OCTOBER 2018</h5>
            <div class="container">
              <h2 class="py-4 px-4"> Mission Impossible
                (2018) : Fall out </h2>
              <h3 class="text-gray-600">This is a discription of this movie and will be brought from imdb api
                Lorem ipsum dolor sit, amet consectetur adipisicing elit. Dolorum assumenda, doloribus culpa
                totam molestiae cumque reprehenderit rem vitae dicta voluptatem quae minus dolores mollitia.
                Eveniet fuga corrupti cupiditate consectetur recusandae?
              </h3>
            </div>
            <button class="my-4 bg-red-500 hover:bg-black
                  text-white font-bold py-2 px-10 rounded-full">
                  <i class="far fa-play-circle py-2"></i>
                  Watch Trailer
            </button>
            <!-- Plat button needs to go right -->
            </button>
            <div class="pause">
              <button class="text-xl">
                <i class="fas fa-pause pr-3 -mr-10"></i>
              </button>
            </div>
          </div>
        </div>
        {% endfor %}
      
      </div>
    </div>
  
  </section>

  <!--starting the card movie card section -->
  <section id="movie-card">
    <div class="text-center pt-3">
      <h2 class="uppercases">Other Movies - Search by Category or name</h2>
    </div>

    <div class="relative text-center">
      <div class="search">

        <form action="/" method="POST">
          <input type="text" id="key_search" value="{{ request.form['key_search'] }}"
           name="key_search" class="bg-black rounded -full w-64 focus:outline-none  focus:shadow-outline"
           placeholder="search">
        </form>

        {% if query_str %}
          <div class="bg-red-100 rounded w-64 m-auto">
            <ul>
              {% for search_res in query_res.results %}
                <li>
                  <!-- Href  = movie_id to detail page  -->
                  <a href="#" class="block hover:bg-gray-800"> 
                    <img src="https://image.tmdb.org/t/p/w92/{{ search_res['poster_path'] }}" 
                    class="w-8"  alt="poster">
                    <span class="ml-4 pb-4"> {{ search_res['title'] }} </span>
                  </a>
                </li>
              {% endfor %}
            </ul> 
          </div>
          {% else %}
            <spann href="#" class="block hover:bg-gray-800"></spann>
        {% endif %}
      </div>
    </div>



    <!-- Categories  -->
    <div class="category py-16 gap-32">
      <button class="bg-red-500 text-white  hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Action
      </button>
      <button class="bg-gray-800 text-white hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Drama
      </button>
      <button class="bg-gray-800 text-white hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Comedy
      </button>
      <button class="bg-red-500 hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Horror
      </button>
      <button class="bg-gray-800 text-white hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Mestry
      </button>
      <button class="bg-red-500 hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Mestry
      </button>
      <button class="bg-gray-800 text-white hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Mestry
      </button>
      <button class="bg-gray-800 text-white hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Mestry
      </button>
      <button class="bg-red-500 hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Mestry
      </button>
      <button class="bg-gray-800 text-white hover:bg-black text-gray-800 font-bold py-2 px-4 rounded-full">
        Mestry
      </button>
      <i class="fas fa-chevron-right pl-3 text-black"></i>
    </div>

    <!-- Cards rendering -->
    <div class="container pt-5 mx-auto px-2 my-3">
      <div class="grid grid-cols-4 gap-16 mb-4">

        <!-- loop through popular movies  -->
        {% for popular in popular_movies.results %}
          <div class="mt-4">
            <i class="fas fa-star text-black"></i>
            <i class="fas fa-star text-black"></i>
            <i class="fas fa-star text-black"></i>
            <!-- redirect to detail page  -->
            <a href="{{ url_for('stream.movie_detail', movie_id=popular['id']) }}">
              <!-- Poster path (images) -- from api -->
              <img src="https://image.tmdb.org/t/p/original{{ popular['poster_path'] }}" alt="movie">
            </a>

            <div class="mt-2">
              <h3 href="#" class="m_link text-lg mt-2 ">
                <!--getting titles -->
                {{popular['title']}}
              </h3>
              <div class="flex items-center text-gray-700">
                <span> {{popular['release_date']}} </span>
                <span> || </span>
                <span>
                  <!-- need to loop throug list of names[genres] not ids -->

                </span>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <!--  <!~~ Load More button  ~~> 
        <div class="wrapper">
          <button class="bg-red-500 text-white mt-5 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full">
            Load More
            <hr>
          </button> 
        </div> -->
    </div>
  </section>

  <!-- Footer  -->

  <section class="footer">
    <div class="mt-5">
      <img class="" src="{{ url_for('static', filename= 'images/logos.svg')}}" alt="">
      <div id="emailme" class="">
        <h2 class=""> Contact</h2>
        <i class="fas fa-at absolute text-green-400 mx-16 mr-5 pt-1"></i>
        <input type="text" class="mx-12 bg-gray-800 rounded-full w-64 mt-auto text-center focus:outline-none
          focus:shadow-outline" placeholder="email">
      </div>
      <div class="social">
        <i class="fab fa-github text-3xl"></i>
        <p class="pl-2 text-white text-2xl">Github</p>
      </div>
    </div>
    <div class="top my-16">
      <button class="bg-red-500 hover:bg-gray-800
      text-white font-bold py-2 px-16 rounded-full">
        <i class="fas fa-arrow-up"></i>
      </button>
    </div>
  </section>



  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
</body>

</html>